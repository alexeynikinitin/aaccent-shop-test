import{a as t,F as g,j as e,u as m,b as v,c as d,s as N,I as b,r as C,d as y,e as O,f as D,N as B}from"./index-ca6be5a6.js";import{B as I,a as k,s as P}from"./index-71608b5b.js";import{C as w}from"./index-9e7a7896.js";const M=s=>s.basket.step,f=s=>s.basket.orderInfo,$=s=>s.service.isShowModal,x=({children:s,onClickClose:n,top:r,left:l})=>t(g,{children:[t("div",{className:"modal",style:{top:r,left:l},children:[e("div",{className:"modal__header",children:e("img",{alt:"close",onClick:n,className:"modal__header_close",src:"/icons/close.svg"})}),e("div",{className:"modal__content",children:s})]}),e("div",{className:"modal__overlay"})]}),A=({count:s,title:n,id:r,regularPrice:l})=>{const{deleteProduct:i}=m(v),o=()=>{i({id:r})};return t("div",{className:"basketItem",children:[e("div",{className:"basketItem__img",children:e("img",{src:`/images/${r}.png`,alt:"img"})}),t("div",{className:"basketItem__info",children:[t("div",{children:[e("h3",{className:"basketItem__info_title",children:n}),e("p",{className:"basketItem__info_subTitle",children:"Производитель: Россия"})]}),t("div",{className:"basketItem__info_counter",children:[e(I,{count:s,id:r}),e("span",{className:"basketItem__info_counter-price",children:`${l.value*s} ${l.currency}`})]})]}),e("div",{className:"basketItem__delete",children:e(k,{title:"Удалить",onClick:o,type:"outlined"})})]})},q=({step:s})=>t("div",{className:"basketSteps",children:[t("div",{className:"basketSteps__step",children:[e("div",{className:"basketSteps__step_square activeStep",children:e("img",{src:"/icons/basket-white.png",alt:"step"})}),e("h4",{className:`basketSteps__step_title ${s==="basket"?"activeStep__text":"null"}`,children:"Корзина"})]}),e("span",{className:"basketSteps__dash"}),t("div",{className:"basketSteps__step",children:[e("div",{className:`basketSteps__step_square ${s==="order"||s==="confirm"?"activeStep":"null"}`,children:e("span",{children:"2"})}),e("h4",{className:`basketSteps__step_title ${s==="order"?"activeStep__text":"null"}`,children:"Оформление"})]}),e("span",{className:"basketSteps__dash"}),t("div",{className:"basketSteps__step",children:[e("div",{className:`basketSteps__step_square ${s==="confirm"?"activeStep":"null"}`,children:e("span",{children:"3"})}),e("h4",{className:`basketSteps__step_title ${s==="confirm"?"activeStep__text":"null"}`,children:"Подтверждение"})]})]}),j=({step:s,setOrderNum:n})=>{const r=d(f),{setBasketStep:l,makeOrder:i}=m(v),{setIsShowModal:o}=m(N),p=()=>l("order"),h=async()=>{l("confirm");const{meta:_,payload:a}=await i(r);_.requestStatus==="fulfilled"&&(n(a),o(!0))};switch(s){case"basket":return e(k,{size:"big",title:"Оформить заказ",type:"primary",onClick:p});case"order":return e(k,{size:"big",title:"Отправить заказ",type:"primary",onClick:h});default:return null}},z=[{id:"city",placeholder:"Город"},{id:"street",placeholder:"Улица"},{id:"home",placeholder:"Дом"}],L=[{id:"name",placeholder:"Имя"},{id:"surname",placeholder:"Фамилия"},{id:"telephone",placeholder:"Телефон"},{id:"email",placeholder:"Email"}],E=[{id:"pickup",title:"Самовывоз: Минск",subtitle:"Минск, ул. Веры Хоружей 43, офис 256"},{id:"deliveryCity",title:"Доставка по Минску"},{id:"deliveryCountry",title:"Доставка по Беларуси",subtitle:"Службой Белпочта, европочта, курьером на дом"}],F=()=>{const{addressData:s,deliveryData:n,personalData:r}=d(f),{setAddressData:l,setDeliveryData:i,setPersonalData:o}=m(v),p=(a,c)=>{c&&o({id:c,value:a})},h=(a,c)=>{c&&l({id:c,value:a})},_=a=>{a&&i({id:a})};return t("div",{className:"basketOrder",children:[t("div",{className:"basketOrder__personalData",children:[e("p",{className:"basketOrder__personalData_title",children:"Личные данные"}),L.map(({id:a,placeholder:c})=>e(b,{id:a,value:r[a],placeholder:c,onChangeInput:p,className:"basketOrder__personalData_input"},a))]}),t("div",{className:"basketOrder__delivery",children:[e("p",{className:"basketOrder__delivery_title",children:"Доставка"}),e("div",{children:E.map(({id:a,title:c,subtitle:u})=>t("div",{className:"basketOrder__delivery_item",children:[t("div",{className:"basketOrder__delivery_item-check",children:[e(w,{id:a,checked:n[a],onClickCheckbox:_}),e("p",{className:"basketOrder__delivery_item-title",children:c})]}),u&&e("span",{className:"basketOrder__delivery_item-subtitle",children:u})]},a))})]}),t("div",{className:"basketOrder__personalData",children:[e("p",{className:"basketOrder__personalData_title",children:"Адрес"}),z.map(({id:a,placeholder:c})=>e(b,{id:a,value:s[a],placeholder:c,onChangeInput:h,className:"basketOrder__personalData_input"},a))]})]})},T=({orderNum:s})=>t("div",{className:"confirmModal",children:[t("div",{className:"confirmModal__firstBlock",children:[e("h2",{children:"Заказ оформлен"}),e("h3",{children:`Ваш заказ №${s??""}`}),e("p",{children:"Спасибо за Ваш заказ!"}),e("p",{children:"Номер вашего заказа отправлен вам на электронную почту."}),e("p",{children:"Сотрудник интернет-магазина свяжется с Вами в ближайшее время для подтверждения заказа"})]}),t("div",{className:"confirmModal__secondBlock",children:[e("p",{children:"По любым вопросам обращайтесь:"}),e("span",{children:"+375 (29) 547 89 75"}),e(k,{title:"Обратный звонок",onClick:()=>{},type:"outlined"})]})]}),G=()=>e("div",{className:"confirmingOrder",children:e("div",{className:"confirmingOrder__info",children:e("h3",{className:"confirmingOrder__info_title",children:"Оформление заказа. Ожидайте"})})}),U=()=>{const s=d(P);return e("div",{className:"basketListProducts",children:s.map(({title:n,id:r,regular_price:l,count:i})=>e(A,{id:r,count:i,title:n,regularPrice:l},r))})};const R=()=>{const[s,n]=C.useState(null),r=y(),l=d(M),i=d(O),o=d($),p=d(D),{setIsShowModal:h}=m(N),{setBasketStep:_,clearBasket:a}=m(v),c=()=>{_(null)},u=()=>{a()},S=()=>{n(null),h(!1),_(null),r("/")};return t("section",{className:"basketPage",children:[l&&e(q,{step:l}),(()=>{switch(l){case"basket":return e(U,{});case"order":return e(F,{});case"confirm":return e(G,{});default:return null}})(),l!=="confirm"&&l!==null&&t("div",{className:"basketPage__footer",children:[t("div",{className:"basketPage__footer_firstBlock",children:[t(B,{to:"/",className:"basketPage__footer_goBack",onClick:c,children:[e("img",{src:"/icons/arrow-left.png",alt:"arrow"}),e("span",{children:"Продолжить покупки"})]}),l==="basket"&&i!==0&&e(k,{title:"Очистить корзину",onClick:u,type:"outlined",size:"small"})]}),t("div",{className:"basketPage__footer_totalPrice",children:[e("span",{children:`Итого: ${i} USD`}),e("p",{children:`Общее количество товаров: ${p}`})]}),l&&i!==0&&e(j,{step:l,setOrderNum:n})]}),o&&e(x,{top:"15%",left:"25%",onClickClose:S,children:e(T,{orderNum:s})})]})};export{R as default};
